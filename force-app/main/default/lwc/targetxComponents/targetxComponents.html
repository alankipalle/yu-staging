<template>
  <lightning-card title="Target X Objects" icon-name="custom:custom63">
    <div class="slds-var-m-around_medium">
      <lightning-combobox
        name="Object"
        label="Object Name"
        placeholder="Choose Object"
        value={value}
        onchange={handleChange}
        options={options}
      >
      </lightning-combobox>
      <br />
      <lightning-button
        variant="brand"
        label="Get Fields"
        title="Primary action"
        onclick={handleClick}
      ></lightning-button>
      <lightning-button
        label="Get Records"
        onclick={getSelected}
      ></lightning-button>
      <br />

      <template if:true={loaded}>
        <div
          class="slds-box slds-p-around_none slds-var-m-top_x-small slds-var-m-bottom_medium slds-m-horizontal_none"
        >
          <lightning-layout>
            <lightning-layout-item size="2" padding="around-small">
              <div
                class="custom-box slds-box slds-var-m-bottom_medium slds-text-align_center"
              >
                <lightning-datatable
                  key-field="DeveloperName"
                  data={data}
                  columns={columns}
                >
                </lightning-datatable>
              </div>
            </lightning-layout-item>
            <lightning-layout-item size="10" padding="around-small">
              <div
                class="custom-box slds-box slds-var-m-bottom_medium slds-text-align_center"
              >
                <lightning-datatable
                  key-field="Id"
                  data={recorddata}
                  columns={recordColumns}
                >
                </lightning-datatable>
              </div>
            </lightning-layout-item>
          </lightning-layout>
        </div>
      </template>
      <template if:false={loaded}>
        <lightning-spinner alternative-text="Loading"></lightning-spinner>
      </template>
    </div>
  </lightning-card>
</template>
