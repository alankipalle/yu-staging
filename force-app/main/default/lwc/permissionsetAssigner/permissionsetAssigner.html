<template>
  <lightning-card
    title="Mass Permissionset Assigner"
    icon-name="custom:custom63"
    class="main"
  >
    <div class="slds-m-around_medium">
      <h1 class="slds-text-heading_small">Assign Permission Sets</h1>
      <p class="slds-text-body_regular">
        The following component helps to assign and remove PermissionSets for
        bulk of users.
      </p>
      <div class="slds-grid slds-gutters">
        <div class="slds-col">
          <span>
            <c-search-cmp
              filter-field-a-p-i-name="Name"
              field-a-p-i-names="Id,Name"
              object-name="Profile"
              onprogressvaluechange={hanldeProgressValueChange}
            ></c-search-cmp>
          </span>
        </div>
        <div class="slds-col">
          <span>
            <c-search-cmp
              filter-field-a-p-i-name="Name"
              field-a-p-i-names="Id,Name"
              object-name="PermissionSet"
            ></c-search-cmp>
          </span>
        </div>
      </div>
      <div class="slds-m-top_small slds-m-bottom_medium">
        <lightning-button
          variant="brand"
          label="Retrieve Profile Users"
          title="Primary action"
          onclick={handleProfileUsers}
        ></lightning-button>
        <lightning-button
          variant="brand-outline"
          label="Retrieve PermSet Users"
          title="Primary action with lighter look"
          onclick={handleClick}
          class="slds-m-left_x-small"
        ></lightning-button>
      </div>
      <template if:true={showTable}>
        <div class="slds-page-header">
          <div class="slds-page-header__row">
            <div class="slds-page-header__col-title">
              <div class="slds-media">
                <div class="slds-media__figure">
                  <lightning-icon
                    icon-name="standard:event"
                    alternative-text="Event"
                    title="Event"
                  ></lightning-icon>
                </div>
                <div class="slds-media__body">
                  <div class="slds-page-header__name">
                    <div class="slds-page-header__name-title">
                      <h1>
                        <span
                          class="slds-page-header__title slds-truncate"
                          title="Rohde Corp - 80,000 Widgets"
                          >Total Users ({dataLength})</span
                        >
                      </h1>
                    </div>
                  </div>
                  <p class="slds-page-header__name-meta">
                    Selected Users •() • Selected PermissionSets()
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="c-container">
          <lightning-layout> </lightning-layout>
        </div>
      </template>
    </div>
    <div class="slds-m-around_medium">
      <c-datatable config={config}></c-datatable>
    </div>
  </lightning-card>
</template>